
<div class="grid client-dashborad-header mb-4 align-items-center">
    <div class="col-6">
        <h4 class="subheading-color">Test List</h4>
    </div>
    <div class="col-6 flex justify-content-end	">
        <button type="submit" pButton pRipple label="+ Add New Test" (click)="createTest()"
            class="secondary-button px-6 text-sm"></button>
    </div>

</div>


<p-toast></p-toast>
<p-confirmDialog styleClass="confirmation-pop-up-dialog"></p-confirmDialog>
<div class="grid mt-5">


    <div class="col-12 ">

        @for(data of testListData; track $index){
            <div class="mb-4">
                <p-accordion [multiple]="true" [activeIndex]="[$index]" >
                    <p-accordionTab>
        
                        <ng-template pTemplate="header">
                            <div class="community-custom-header">
                                <span class="underline text-2xl capitalize white-space-nowrap overflow-hidden text-overflow-ellipsis">{{data.title}}</span>
                            </div>
                            <div class="flex">
                                <i class="mr-3 cursor-pointer pi pi-wave-pulse" (click)="reportView(data.id)"></i>
                                <i class="mr-3 cursor-pointer pi pi-cog" (click)="testSeting(data.id)"></i>
                                <i class="cursor-pointer pi pi-trash label-required" (click)="deleteTest(data.id)"></i>
                            </div>
                        </ng-template>

                        <p-table [rows]="10" [showLoader]="true" [responsive]="true" [scrollable]="true"
                            scrollHeight="37.938rem" selectionMode="single" class="test-table" [value]="data.sections">
        
                            <ng-template pTemplate="body" let-datas>
                                <tr class="w-full flex flex-wrap" >
                                    <td style="width: 85%;word-break:break-all;" (click)="sectionListPage(datas.id, data.id)" class="pl-4 text-xl underline cursor-pointer capitalize table-p">
                                        {{datas.name}}
                                        
                                    </td>
    
                                    <td style="width: 15%;word-break:break-all;" class="pl-4 capitalize">
                                        <i class="mr-4 cursor-pointer pi pi-pencil" (click)="editSection(datas)" ></i>
                                        <i class="cursor-pointer pi pi-trash label-required" (click)="deleteSection(datas.id)"></i>
                                    </td>
                                    
        
        
                                </tr>
                            </ng-template>
        
                        </p-table>


                        <button type="submit" pButton pRipple label="Add Section" (click)="createSection(data)"
                        class="w-full accordion-inner-button border-dashed px-6 text-sm mt-4"></button>
        
                    </p-accordionTab>
                </p-accordion>
            </div>
        }

        <!-- <button type="submit" pButton pRipple label="Add Test" class="mt-3 w-full add-section-button border-dashed px-6 text-sm" (click)="createTest()"></button> -->

    </div>

</div>


@if(isCreateTest){
    <p-sidebar [(visible)]="isCreateTest" position="right" [style]="{width:'27.6%'}">
            <app-create-test (closeSideBar)="closeSideBar($event)" [moduleName]="moduleName" [subSetId]="subSetId"></app-create-test>
    </p-sidebar>
    }

@if(isCreateSection){
    <p-sidebar [(visible)]="isCreateSection" position="right" [style]="{width:'27.6%'}">
        <app-create-test-section [editSectionData]="editSectionData" (closepopup)="closepopupSection($event)" [moduleName]="moduleName" [testDataForSectionCreate]="testDataForSectionCreate"></app-create-test-section>
    </p-sidebar>
    
}


@if(isTestSetting){

    <p-sidebar [(visible)]="isTestSetting" position="right" [style]="{width:'40%'}">
        <app-test-setting [testIdForSetting]="testIdForSetting" (closeSideBar)="closeSettingSideBar()"></app-test-setting>
    </p-sidebar>

}


@if(isReportView){
    <p-sidebar [(visible)]="isReportView" position="right" [style]="{width:'40%'}">
        <app-test-serice-report></app-test-serice-report>
    </p-sidebar>
}
