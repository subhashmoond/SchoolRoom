<div class="card">

    <div class="grid client-dashborad-header mb-4 align-items-center">
        <div class="col-16">
            <h4 class="subheading-color">Courses Pricing</h4>
        </div>

        <div class="col-6 flex justify-content-end">
            <p-button class="create-button border-round-md" (click)="openCreatePriceSidebar()">Add Pricing Plan</p-button>
        </div>

    </div>


    <p-table [rows]="10" [showLoader]="true" [responsive]="true" [scrollable]="true" scrollHeight="37.938rem"
        selectionMode="single" class="client-data-table" [value]="priceList">

        <ng-template pTemplate="header" class="p-4">
            <tr class="w-full flex flex-wrap">
                <th style="width:25%;word-break:break-all;" class="pl-3 pt-3 border-none primary-color">Plan Type</th>
                <th style="width:25%;word-break:break-all;" class="pl-4 pt-3 border-none primary-color">Price</th>
                <th style="width:25%;word-break:break-all;" class="pl-4 pt-3 border-none primary-color">Action
                </th>
            </tr>

        </ng-template>

        <ng-template pTemplate="body" let-data>
            <tr class="w-full flex flex-wrap">
                <td style="width: 25%;word-break:break-all;" class="pl-4 capitalize">
                    {{data.type}}
                </td>
                <td style="width: 25%;word-break:break-all;" class="pl-4">
                    {{data.price}}
                </td>
                <td style="width: 25%;" class="pl-4">
                    <span class="relative flex flex-wrap align-items-center"><img
                            src="../../../../assets/images/icon/mdi_eye.svg"
                            class="search-icon client-view-icon"></span>
                </td>

            </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="5">No customers found.</td>
            </tr>
        </ng-template>

    </p-table>

</div>


@if(isCreatePlan){
<p-sidebar [(visible)]="isCreatePlan" position="right" [style]="{width:'40%'}">
    <h4 class="pt-4 pb-4 m-0 font-semibold line-height-sm">Add Pricing Plan</h4>

    <form [formGroup]="createPlanForm" (ngSubmit)="submitPlan()" class="w-full flex flex-wrap">

        <div class="grid nested-grid mt-3">

            <div class="col-12">
                <div class="grid">

                    <div class="col-6">
                        <label class="w-full mb-1 text-sm font-medium line-height-exsm inline-block"> Price
                            <span>*</span></label>
                        <input class="w-full capitalize" placeholder="10,000" type="text" pInputText formControlName="price" />
                    </div>

                    <div class="col-6">
                        <label class="w-full mb-1 text-sm font-medium line-height-exsm inline-block"> Discount Price
                        </label>
                        <input class="w-full capitalize" placeholder="8,000" type="text" pInputText formControlName="discount" />
                    </div>

                    <div class="col-12 flex justify-content-center align-items-center border-top pt-4 mt-4">
                        <p-inputSwitch formControlName="instalment" [trueValue]="true" />
                        <label class="text-sm font-medium line-height-exsm ml-2"> Add pay in instalment plan
                        </label>
                    </div>

                    @if(createPlanForm.get('instalment')?.value == true){
                        <div class="col-12 plan-design border-bottom pb-4 mb-4">
                            <div class="plan-inner">
                                <p-radioButton value="monthly" formControlName="instalmentType" name="instalmentPlan" inputId="rb1"></p-radioButton>
                                <!-- <p-radioButton value="monthly" formControlName="instalmentType" name="group1"></p-radioButton> -->
                                <label class="ml-2">Monthly instalments</label>
                            </div>
                        
                            <!-- Show this input if the monthly instalment is selected -->
                             
                            <div class="plan-inner">
                                @if(instalmentType === 'monthly'){
                                    
                                    <input class="w-full capitalize" type="text" pInputText
                                        formControlName="instalmentMonthsValue" placeholder="No. of months" />
                                }
                            </div>
                        
                            <div class="plan-inner">
                                <p-radioButton value="weekly" formControlName="instalmentType" name="instalmentPlan" inputId="rb2"></p-radioButton>
                                <!-- <p-radioButton value="weekly" formControlName="instalmentType" name="group2"></p-radioButton> -->
                                <label class="ml-2">Weekly instalments</label>
                            </div>
                        
                            <!-- Show this input if the weekly instalment is selected -->
                            <div class="plan-inner">
                                @if(instalmentType === 'weekly'){
                                    <input class="w-full capitalize" type="text" pInputText
                                        placeholder="No. of weeks" formControlName="instalmentWeeklyValue" />
                                }
                            </div>
                        </div>

                        
                    <!-- <div class="col-12 plan-design border-bottom pb-4 mb-4">
                        <div class="plan-inner">
                            

                            <p-radioButton value="monthly" formControlName="instalmentType" name="group1"   />
                            <label class="ml-2"> Monthly instalments </label>

                        </div>

                        <div class="plan-inner">
                            <input class="w-full capitalize" type="text" pInputText
                                formControlName="instalmentMonthsValue" placeholder="No. of months" />
                        </div>


                        <div class="plan-inner">
                            <p-radioButton value="Weekly" formControlName="instalmentType" name="group2"  />
                            <label class="ml-2"> Weekly instalments </label>
                        </div>

                        <div class="plan-inner">
                           
                            <input class="w-full capitalize" type="text" pInputText placeholder="No. of weeks" formControlName="instalmentWeeklyValue" />
                        </div>

                    </div> -->
                    }





                    <div class="col-12">
                        <div class="flex align-items-center">
                            <p-checkbox formControlName="duration" label="Limit course access duration" name="duration"
                                [binary]="true" />
                        </div>
                    </div>

                    @if(createPlanForm.get('duration')?.value === true){
                        <div class="col-12 plan-design pb-4 mb-4">
                            <div class="plan-inner">
                                <p-radioButton name="binary" value="1" formControlName="durationDate"/>
                                <label class="ml-2"> Until fixed date </label>
    
                            </div>
    
                            <div class="plan-inner">
                                <p-calendar [showIcon]="true" inputId="icondisplay" formControlName="durationDateValue" />
                            </div>
    
    
                            <div class="plan-inner">
                                <p-radioButton name="binary" value="1" formControlName="durationDays" [inputId]="'days'" />
                                <label class="ml-2"> Until specific number of days</label>
                            </div>
    
                            <div class="plan-inner">
                               
                                <input class="w-full capitalize" type="text" pInputText placeholder="No. of Days" formControlName="durationDaysValue" />
                            </div>
    
                        </div>
                    }

                </div>
            </div>



        </div>

        <div
            class="assign-fix-buttons bg-white py-3 px-5 fixed flex flex-wrap aign-items-center justify-content-end mt-5">
            <button pButton pRipple label="Cancel"
                class="primary-border-button px-5 mr-3 text-sm"></button>
            <button type="submit" pButton pRipple label="Add Plan"
                class="primary-button px-5 text-sm"></button>
        </div>
    </form>

</p-sidebar>
}