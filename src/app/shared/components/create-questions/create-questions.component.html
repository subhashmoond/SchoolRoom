<p-toast />


<div class="w-full p-8 ">

  <h4 class="m-0 pt-4 font-semibold line-height-sm mb-5">Add Question</h4>


    <form [formGroup]="addQuestionForm" class="w-full flex flex-wrap mt-4 mb-4">
        <div class="flex flex-wrap w-full mb-4">
            <div class="w-full">
                <label class="w-full mb-1 text-lg font-medium line-height-exsm inline-block"> Question Type <span class="input-required-color">*</span>
                </label>
                <p-dropdown class="capitalize" [filter]="true" filterBy="name" id="officeid" class="text-sm w-full"
                    [required]="true" formControlName="selecttitle" [options]="questionTypes" optionValue="id"
                    optionLabel="name" placeholder="Select Question Type"></p-dropdown>
            </div>
        </div>

        <div class="flex flex-wrap w-full mb-4">
            <div class="w-full">
                <label class="w-full mb-1 text-lg font-medium line-height-exsm inline-block"> Difficulty Type <span class="input-required-color">*</span>
                </label>
                <p-dropdown class="capitalize" id="officeid" class="text-sm w-full"
                    [required]="true" formControlName="difficulty" [options]="difficultyLavel" optionValue="name"
                    optionLabel="name" placeholder="Select Title"></p-dropdown>
            </div>
        </div>

        <div class="flex flex-wrap w-full mb-4">
            <div class="w-full">
                <label class="w-full mb-1 text-lg font-medium line-height-exsm inline-block">Question Text <span class="input-required-color">*</span>
                </label>
                <p-editor formControlName="text" [style]="{ height: '100px' }" placeholder="e.g Q.What is Javascripat" />

            </div>
        </div>

        @if(isOtherLang){
            <div class="flex flex-wrap w-full mb-4">
                <div class="w-full">
                    <label class="w-full mb-1 text-lg font-medium line-height-exsm inline-block">{{testDetails.another_lang.language_name}} Lang Question Text <span class="input-required-color">*</span>
                    </label>
                    <p-editor formControlName="otherlangtext" [style]="{ height: '100px' }" placeholder="e.g Q.What is Javascripat" />
                </div>
            </div>
        }

        @if (addQuestionForm.get('selecttitle')?.value ===  "fillblank" || addQuestionForm.get('selecttitle')?.value ===  "num") {
            <div class="flex flex-wrap w-full mb-4">
                <div class="w-full">
                    <label class="w-full mb-1 text-lg font-medium line-height-exsm inline-block"> Answer </label>
                    <input class="w-full block text-sm" pInputText formControlName="answer" placeholder="Enter answer" 
                        required="true" />
                </div>
            </div>
        }
        @else {

            <div class="w-full p-4 primary-secondary-bg border-round-md">
                <h6> Options </h6>
            </div>
    
    
            <div class="flex flex-wrap w-full mb-4">
                <div class="w-full">
    
                    <div formArrayName="options">
                        @for(option of options.controls; track $index){
    
                        <div [formGroupName]="$index" class="option-row border-bottom-light mb-2">
                            <input type="checkbox" formControlName="isCorrect" />
                            <div>
                                <label for="correctOption{{ $index }}">Option {{ $index + 1 }}</label>
                            </div>
    
                            <div class="ml-2 mr-2">
                                <p-editor class="editor mb-3" formControlName="text" [style]="{ height: '100px' }" placeholder="Default language Option {{ $index + 1 }}" />

                                @if(isOtherLang){
                                    <p-editor class="editor" formControlName="otherLang" [style]="{ height: '100px' }" placeholder="{{testDetails.another_lang.language_name}} Language Option {{ $index + 1 }}" />
                                }

                            </div>
    
                            <button type="button" (click)="removeOption($index)" class="remove-button"><i class="pi pi-minus"></i></button>
                        </div>
                        }
                    </div>
    
                    <button type="button" class="add-more-button" (click)="addOption()"><i class="pi pi-plus"></i></button>
    
                </div>
            </div>

        }



        <div class="flex flex-wrap w-full mb-4">
            <div class="w-full">
                <label class="w-full mb-1 text-lg font-medium line-height-exsm inline-block">Explanation
                </label>
                <p-editor formControlName="explanation" [style]="{ height: '100px' }" placeholder="e.g - JavaScript is a programming language primarily used for creating interactive and dynamic web pages. It works alongside HTML and CSS to add interactivity, handle events, and manipulate content. Known for its versatility, JavaScript is used in both client-side (browser) and server-side (Node.js) development, making it a core technology in web development." />

            </div>
        </div>

        @if(isOtherLang){
            <div class="flex flex-wrap w-full mb-4">
                <div class="w-full">
                    <label class="w-full mb-1 text-lg font-medium line-height-exsm inline-block">{{testDetails.another_lang.language_name}} Lang Explanation
                    </label>
                    <p-editor formControlName="otherlangexplanation" [style]="{ height: '100px' }" placeholder="e.g - JavaScript is a programming language primarily used for creating interactive and dynamic web pages. It works alongside HTML and CSS to add interactivity, handle events, and manipulate content. Known for its versatility, JavaScript is used in both client-side (browser) and server-side (Node.js) development, making it a core technology in web development." />
    
                </div>
            </div>
        }

        <div class="flex flex-wrap w-full mb-4">
            <p-fieldset legend="Show Advanced Options" [styleClass]="'w-full'" [toggleable]="true">
                <div class="grid">
                    <div class="col-6">
                        <div class="flex flex-wrap w-full mb-4">
                            <div class="w-full">
                                <label class="w-full mb-1 text-lg font-medium line-height-exsm inline-block"> Marks </label>
                                <input class="w-full block text-sm" pInputText formControlName="marks" placeholder="Enter Question Marks" 
                                    required="true" />
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="flex flex-wrap w-full mb-4">
                            <div class="w-full">
                                <label class="w-full mb-1 text-lg font-medium line-height-exsm inline-block"> Nagative Marks </label>
                                <input class="w-full block text-sm" pInputText formControlName="nagativemarks" placeholder="Enter Question Nagative Marks" 
                                    required="true" />
                            </div>
                        </div>
                    </div>
                </div>
                
            </p-fieldset>
        </div>

        <div
            class="assign-fix-buttons bg-white py-3 px-5 fixed flex flex-wrap aign-items-center justify-content-end mt-5">
            <button pButton pRipple label="Cancel" class="primary-border-button px-5 mr-3 text-sm"></button>
            <button type="submit" (click)="submit()" pButton pRipple label="Submit"
                class="primary-button px-5 text-sm"></button>
        </div>
    </form>
</div>