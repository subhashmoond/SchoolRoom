<p-toast></p-toast>

<div class="mt-4 ml-2">
    {{activeIndex + 1}}/3
</div>

<!-- Step 1: Select Product Type -->
@if(activeIndex === 0){

<div class="add-courses mt-4">

    <div class="text-center mb-3">
        <h3 class="m-0 pb-2">What would you like to create?</h3>
    </div>

    <form [formGroup]="addDigitalProductForm">

        <div class="grid w-8 m-0-a">

            <div class="col-12 mb-2">
                <div class="w-full">
                    <label class="w-full mb-1  font-medium line-height-exsm inline-block">Digital product title
                        <span>*</span></label>
                    <input class="w-full capitalize" pInputText formControlName="title"
                        placeholder="Enter Product Title" required="true" />
                </div>
            </div>

            <div class="col-6 mb-5">
                <div class="w-full">
                    <label class="w-full mb-1  font-medium line-height-exsm inline-block">Product Category</label>

                    <p-dropdown class="capitalize" [filter]="true" filterBy="name" id="officeid" class="text-sm w-full"
                        [required]="true" formControlName="productcategory" [options]="digitalProductCategoryListData" optionValue="id"
                        optionLabel="name" placeholder="Select Label"></p-dropdown>

                </div>
            </div>

            <div class="col-6 mb-5">
                <div class="w-full">
                    <label class="w-full mb-1  font-medium line-height-exsm inline-block">Product label</label>

                    <p-dropdown class="capitalize" [filter]="true" filterBy="name" id="officeid" class="text-sm w-full"
                        [required]="true" formControlName="productlabel" [options]="productLable" optionValue="name"
                        optionLabel="name" placeholder="Select Label"></p-dropdown>

                </div>
            </div>

            <div class="col-12">
                <div class="flex flex-wrap gap-4 ">
                    @for(data of productType; track $index){

                    <div class="digital-product border-round-md flex " [class.active]="activeIndexType === $index"
                        (click)="setActive($index, data)">

                        @switch (data.name) {
                        @case ('Document') {
                        <i class="pi pi-file" style="font-size: 2rem"></i>
                        }
                        @case ('Image(s)') {
                        <i class="pi pi-image" style="font-size: 2rem"></i>
                        }
                        @case ('Link') {
                        <i class="pi pi-link" style="font-size: 2rem"></i>
                        }
                        @case ('Video') {
                        <i class="pi pi-video" style="font-size: 2rem"></i>
                        }
                        @case ('Text') {
                        <i class="pi pi-book" style="font-size: 2rem"></i>
                        }
                        @case ('Physical goods') {
                        <i class="pi pi-truck" style="font-size: 2rem"></i>
                        }
                        }

                        <div class="ml-4">
                            <h5 class="text-xl font-normal text-color mb-2">{{ data.name }}</h5>
                            <span class="text-sm text-color-secondary">{{ data.description }}</span>
                        </div>

                    </div>
                    }
                </div>
            </div>
        </div>

    </form>









</div>
}

<!-- Step 2: Content Upload  -->
<!-- @if(activeIndex === 1){
<form [formGroup]="addProductFile">
    <div class="grid w-6 m-0-a mt-4">


        <div class="text-center mb-5 col-12">
            <h3 class="  m-0 pb-2">Add Document</h3>

        </div>



        <div class="col-6 mb-5">
            <div class="w-full">
                <label class="w-full mb-1  font-medium line-height-exsm inline-block">File Name
                    <span>*</span></label>
                <input class="w-full capitalize" pInputText formControlName="fileName" placeholder="Enter File Name"
                    required="true" />
            </div>
        </div>

        <div class="col-6 mb-5">
            <div class="w-full">
                <label class="w-full mb-1  font-medium line-height-exsm inline-block">Edtition Year</label>
                <input class="w-full capitalize" pKeyFilter="num" pInputText formControlName="edtition"
                    placeholder="Enter year" required="true" />
            </div>
        </div>

        <div class="col-12">
            <label class="w-full mb-1  font-medium line-height-exsm inline-block">Upload Document
                <span>*</span></label>

            <div
                class="border-solid border-round-lg main-border-color border-2 p-4 flex flex-column flex-wrap align-items-center justify-content-center user-image relative">

                <img width="100" height="100"
                    [src]="selectedFileObjectUrl ? selectedFileObjectUrl : '../../../../assets/images/icon/Image.svg'"
                    alt="Image Preview" [ngClass]="selectedFileObjectUrl ? 'w-full h-full' : 'w-4rem h-4rem'" />
                @if(selectedFileObjectUrl){
                <i class="pi pi-times profile-remove-icon" (click)="profileImageRemove()" style="font-size: 1rem"></i>
                }

                @if(!selectedFileObjectUrl){
                <span class="text-xs text-color-secondary mt-3"> Max file size is 200 MB </span>
                }

                <span class="flex flex-wrap align-items-center justify-content-center mt-2 mb-1">
                    @if(!selectedFileObjectUrl){
                    <img class="h-1rem w-1rem" src="../../../../assets/images/icon/upload-icon.svg">
                    }
                    <p-fileUpload #fileUpload [showUploadButton]="true" mode="basic"
                        class="bg-none text-base text-700 border-0 z-2 required-upload profile-message-remove"
                        chooseLabel="Upload Image*" name="demo[]" url="https://www.primefaces.org/cdn/api/upload.php"
                        accept="image/*" [maxFileSize]="maxFileSizeLimit"
                        (onSelect)="onFileSelect($event)"></p-fileUpload>
                </span>

            </div>



        </div>


        <div class="col-12 flex">
            <p-checkbox formControlName="isDownload" [binary]="true"></p-checkbox>
            <label class="ml-2">This is a Downloadable</label>
        </div>



    </div>
</form>
} -->

<!-- Step 3: Digital Product Priceing  -->
@if(activeIndex === 1){
<form [formGroup]="addProductPrice">
    <div class="grid w-6 m-0-a mt-4">


        <div class="text-center mb-5 col-12">
            <h3 class="  m-0 pb-2">Add Price</h3>

        </div>

        <div class="col-12 formgrid grid permissions">
            <p-inputSwitch formControlName="ispaid" class="mr-2" />
            <span class="text-lg inline-block">This is a paid course</span>
        </div>

        <!-- <div class="col-12 flex">
                    <p-checkbox formControlName="ispaid" [binary]="true"></p-checkbox>
                    <label class="ml-2">This is a paid course</label>
             </div> -->

        <div class="col-12 mt-4" *ngIf="addProductPrice.get('ispaid')?.value">
            <div class="grid">
                <div class="col-6">
                    <label class="w-full mb-1  font-medium line-height-exsm inline-block"> Price of the product*</label>
                    <input class="w-full" pKeyFilter="num" pInputText placeholder="e.g 2999"
                        formControlName="mrp" />
                </div>

                <div class="col-6">
                    <label class="w-full mb-1  font-medium line-height-exsm inline-block">Discounted price for the audience*</label>
                    <input class="w-full" pKeyFilter="num" pInputText placeholder="2000"
                        formControlName="price" />
                </div>

            </div>
        </div>

        <div class="col-12 mb-4">
            <span class="text-base text-primary-purple cursor-pointer " (click)="advancedSetting()"> Advanced settings </span>

            @if(isAdvancedSetting){

            <div class="col-12 flex mt-4 mb-2">
                <p-checkbox formControlName="pgfees" [binary]="true"></p-checkbox>
                <label class="ml-2">Pass internet handling fees (PG fees) to learners (₹0)</label>
            </div>


            <div class="p-4 surface-50">
                <span> <i class="pi pi-sun mr-2"></i> Final payable price by learners is ₹ 0.00 and you’ll receive ₹ 0.00  </span>
            </div>

            }

        </div>


        <div class="col-12 formgrid grid permissions">
            <p-inputSwitch formControlName="timelimit" class="mr-2" />
            <span class="text-lg inline-block">This is available to purchase for a limited time period</span>
        </div>

        @if(addProductPrice.get('timelimit')?.value){

        <div class="col-12">
            <label class="w-full mb-1  font-medium line-height-exsm inline-block">Buy before days</label>
            <input class="w-full" pKeyFilter="num" pInputText placeholder="e.g 365" formControlName="days" />
        </div>

        }




    </div>
</form>
}

<!-- Step 4: Thambnal and Des. -->
@if(activeIndex === 2){

<form [formGroup]="addDecThumb">
    <div class="grid w-6 m-0-a mt-4">


        <div class="text-center mb-5 col-12">
            <h3 class="  m-0 pb-2">Add Description and Edtition Year</h3>
        </div>


        <div class="col-6 mb-5">
            <div class="w-full">
                <label class="w-full mb-1  font-medium line-height-exsm inline-block">Edtition Year</label>
                <input class="w-full capitalize" pKeyFilter="num" pInputText formControlName="edtition"
                    placeholder="Enter year" required="true" />
            </div>
        </div>


        <div class="col-12 mb-5">
            <div class="w-full">
                <label class="w-full mb-1  font-medium line-height-exsm inline-block"> Description </label>
                <p-editor formControlName="description" [style]="{ height: '320px' }"></p-editor>
            </div>
        </div>



    </div>
</form>

}







<!-- Navigation Buttons -->
<div class="w-98 border-top-light bg-white absolute bottom-0 grid m-0-a">
    <div class="col-6">
        <button type="button" pButton pRipple (click)="back()" label="Back"
            class="primary-border-button px-5 mr-3 text-sm" [disabled]="activeIndex === 0"></button>
    </div>
    <div class="col-6 flex justify-content-end">
        <button type="button" pButton pRipple (click)="submit()"
            label="{{ activeIndex === items.length - 1 ? 'Submit' : 'Next' }}" class="secondary-button px-6 "></button>
    </div>
</div>