<div class="cards">

    <div class="grid client-dashborad-header mb-4 align-items-center">
        <div class="col-6">
            <h4 class="subheading-color">Curriculum</h4>
        </div>
        <div class="col-6 flex justify-content-end	">
            <button type="submit" pButton pRipple label="Preview" class="secondary-button px-6 text-sm"></button>
        </div>

    </div>


    <div class="grid">

        <div class="col-12">

            <form [formGroup]="addForm">
                <div formArrayName="courses">
                  @for(course of courses.controls; track course; let i = $index){
                  <div [formGroupName]="i" class="content-card mb-4">
                    <div class="p-3">
                      <i class="pi pi-microsoft font-bold text-primary-color"></i>
                    </div>
                    <div class="border-left">
                      <div class="grid grid-nogutter client-dashborad-header align-items-center border-bottom-light p-3 card">
                        <div class="col-6 flex">
                          <i class="pi pi-microsoft font-bold pr-4 pt-1 text-primary-color"></i>
                          <div>
              
                            @if(!isSavedCourses[i]){
                            <input class="w-full" pInputText formControlName="items" />
                            }
                            @else{
                            <span>{{ course.get('items')?.value }}</span>
                            }
              
                          </div>
                        </div>
                        <div class="col-6 flex justify-content-end">
                          @if(!isSavedCourses[i]){
                          <button type="button" pButton pRipple label="Save" (click)="saveCourse(i)"
                            class="secondary-button px-6 text-sm"></button>
                          }
                          @else{
                          <p-button class="mr-2 border-round-md button-shadow">Publish All</p-button>
                          }
              
                        </div>
                      </div>
              
                      <div formArrayName="lessons">
                        @for(lesson of lessons(i).controls; track lesson; let j = $index){
                        <div [formGroupName]="j" class="grid grid-nogutter p-3">
                          <div class="col-6 flex">
                            <i class="pi pi-microsoft font-bold pr-4 pt-1 text-primary-color"></i>
                            <div>
                              @if(!lesson.dirty){
                              <input class="w-full" pInputText formControlName="items" />
                              }
                              @else{
                              <span>{{ lesson.get('items')?.value }}</span>
                              }
                            </div>
                          </div>
                          <div class="col-6 flex justify-content-end">
                            @if(!lesson.dirty){
                              <button type="button" pButton pRipple label="Save" (click)="saveLesson(i, j)"
                                class="secondary-button px-6 text-sm"></button>
                            }
                            @else{
                              <button type="button" pButton label="Publish" class="outline-icon-button edit-button"></button>
                            }
                          </div>
                        </div>
                        }
                        <!-- Subject Card Footer (Action) -->
                        <div
                          class="grid grid-nogutter client-dashborad-header align-items-center border-bottom-light p-3 border-top-light">
                          <div class="col-6">
                            <p-button icon="pi pi-plus" (click)="addLesson(i)" label="New Lesson" [text]="true"
                              severity="secondary"></p-button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  }
                </div>
              </form>



        </div>

        <div class="col-12">
            <span
                class="border-dashed w-full h-5rem m-2 surface-overlay font-bold flex align-items-center justify-content-start pl-4"
                (click)="addCourse()">
                <i class="pi pi-plus mr-2 font-bold"></i>
                Create New Subject
            </span>
        </div>


    </div>



</div>